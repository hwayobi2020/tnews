# ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜: ë©€í‹° ë´‡ ë‰´ìŠ¤ ë¸Œë¦¬í•‘ ì„œë¹„ìŠ¤

## ğŸ¯ í•µì‹¬ ì»¨ì…‰

**ì‚¬ìš©ìë“¤**: ê°ì BotFatherë¡œ ë´‡ ìƒì„±
**ë‹¹ì‹ ì˜ ì„œë²„**: Claude APIë¡œ ë‰´ìŠ¤ ìš”ì•½ ì œê³µ
**ë¹„ìš©**: Claude API 1ê°œë¡œ ëª¨ë“  ì‚¬ìš©ì ì„œë¹™

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ì‚¬ìš©ìë“¤                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ ë´‡A  â”‚  â”‚ ë´‡B  â”‚  â”‚ ë´‡C  â”‚  â”‚ ë´‡D  â”‚  ...         â”‚
â”‚  â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”˜              â”‚
â”‚     â”‚         â”‚         â”‚         â”‚                    â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                    â†“                                    â”‚
â”‚         í† í° + í‚¤ì›Œë“œ ë“±ë¡                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ë‹¹ì‹ ì˜ ì¤‘ì•™ ì„œë²„                            â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚         ì›¹ UI (Flask/FastAPI)              â”‚       â”‚
â”‚  â”‚  - ë´‡ í† í° ë“±ë¡                            â”‚       â”‚
â”‚  â”‚  - í‚¤ì›Œë“œ ì„¤ì •                             â”‚       â”‚
â”‚  â”‚  - ì‹œê°„ ì„¤ì •                               â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                     â†“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚         ë°ì´í„°ë² ì´ìŠ¤ (SQLite/PostgreSQL)   â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚       â”‚
â”‚  â”‚  â”‚ user_id | bot_token | chat_id  â”‚     â”‚       â”‚
â”‚  â”‚  â”‚ keyword | alert_time | active   â”‚     â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                     â†“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚         ìŠ¤ì¼€ì¤„ëŸ¬ (APScheduler)             â”‚       â”‚
â”‚  â”‚  - ë§¤ì¼ ì •í•´ì§„ ì‹œê°„ ì‹¤í–‰                   â”‚       â”‚
â”‚  â”‚  - ê° ì‚¬ìš©ìë³„ ë³‘ë ¬ ì²˜ë¦¬                   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                     â†“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚         ë‰´ìŠ¤ ìˆ˜ì§‘ ëª¨ë“ˆ                     â”‚       â”‚
â”‚  â”‚  - Google News RSS                         â”‚       â”‚
â”‚  â”‚  - í‚¤ì›Œë“œë³„ 10ê°œ ìˆ˜ì§‘                      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                     â†“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚         Claude API (ë‹¹ì‹ ì˜ API í‚¤)         â”‚       â”‚
â”‚  â”‚  - ë‰´ìŠ¤ ìš”ì•½ ìƒì„±                          â”‚       â”‚
â”‚  â”‚  - 1ë²ˆ í˜¸ì¶œë¡œ ëª¨ë“  ì‚¬ìš©ì ì„œë¹™ ê°€ëŠ¥        â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                     â†“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚         í…”ë ˆê·¸ë¨ ì „ì†¡ ëª¨ë“ˆ                 â”‚       â”‚
â”‚  â”‚  - ê° ì‚¬ìš©ìì˜ ë´‡ í† í° ì‚¬ìš©                â”‚       â”‚
â”‚  â”‚  - ê°œë³„ Chat IDë¡œ ì „ì†¡                     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ê° ì‚¬ìš©ìì˜ í…”ë ˆê·¸ë¨                        â”‚
â”‚                                                         â”‚
â”‚  ì‚¬ìš©ìA â† ë´‡Aë¡œ ë‰´ìŠ¤ "AI" ìˆ˜ì‹                          â”‚
â”‚  ì‚¬ìš©ìB â† ë´‡Bë¡œ ë‰´ìŠ¤ "ë°˜ë„ì²´" ìˆ˜ì‹                      â”‚
â”‚  ì‚¬ìš©ìC â† ë´‡Cë¡œ ë‰´ìŠ¤ "ê¸ˆë¦¬" ìˆ˜ì‹                        â”‚
â”‚  ì‚¬ìš©ìD â† ë´‡Dë¡œ ë‰´ìŠ¤ "ë¶€ë™ì‚°" ìˆ˜ì‹                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### users í…Œì´ë¸”

```sql
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    telegram_bot_token TEXT NOT NULL UNIQUE,
    chat_id TEXT,
    username TEXT,
    keyword TEXT NOT NULL,
    alert_time TIME DEFAULT '09:00',
    active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_active ON users(active);
CREATE INDEX idx_alert_time ON users(alert_time);
```

### news_cache í…Œì´ë¸” (ì„ íƒì‚¬í•­ - ë¹„ìš© ì ˆê°)

```sql
CREATE TABLE news_cache (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    keyword TEXT NOT NULL,
    news_data JSON,
    summary TEXT,
    created_at DATE,
    UNIQUE(keyword, created_at)
);

-- ê°™ì€ í‚¤ì›Œë“œëŠ” í•˜ë£¨ 1ë²ˆë§Œ ìš”ì•½
-- ì—¬ëŸ¬ ì‚¬ìš©ìê°€ "AI" í‚¤ì›Œë“œ â†’ Claude 1ë²ˆë§Œ í˜¸ì¶œ
```

---

## ğŸ”„ í”„ë¡œì„¸ìŠ¤ í”Œë¡œìš°

### 1. ì‚¬ìš©ì ë“±ë¡ í”Œë¡œìš°

```python
# ì›¹ UI: /register
@app.route('/register', methods=['POST'])
def register_user():
    bot_token = request.form['bot_token']
    keyword = request.form['keyword']
    alert_time = request.form.get('alert_time', '09:00')

    # 1. ë´‡ í† í° ìœ íš¨ì„± ê²€ì‚¬
    if not validate_telegram_token(bot_token):
        return "Invalid token", 400

    # 2. Chat IDëŠ” ì•„ì§ ëª¨ë¦„ (ì‚¬ìš©ìê°€ /start ë³´ë‚´ì•¼ í•¨)
    db.insert_user(
        bot_token=bot_token,
        keyword=keyword,
        alert_time=alert_time,
        chat_id=None  # ë‚˜ì¤‘ì— ì—…ë°ì´íŠ¸
    )

    return "ë“±ë¡ ì™„ë£Œ! ë´‡ì—ê²Œ /startë¥¼ ë³´ë‚´ì„¸ìš”."
```

### 2. Chat ID ìˆ˜ì§‘ í”Œë¡œìš°

```python
# Webhook ë˜ëŠ” í´ë§ìœ¼ë¡œ getUpdates
def collect_chat_ids():
    """ëª¨ë“  ë“±ë¡ëœ ë´‡ì˜ Chat ID ìˆ˜ì§‘"""
    users = db.get_users_without_chat_id()

    for user in users:
        updates = get_telegram_updates(user.bot_token)

        for update in updates:
            chat_id = update['message']['chat']['id']

            # DB ì—…ë°ì´íŠ¸
            db.update_chat_id(user.id, chat_id)
```

### 3. ë‰´ìŠ¤ ë¸Œë¦¬í•‘ í”Œë¡œìš°

```python
# ìŠ¤ì¼€ì¤„ëŸ¬: ë§¤ì¼ ì‹¤í–‰
@scheduler.scheduled_job('cron', hour=9, minute=0)
def daily_news_briefing():
    """ë§¤ì¼ ì˜¤ì „ 9ì‹œ ì‹¤í–‰"""

    # 1. í™œì„± ì‚¬ìš©ì ì¡°íšŒ
    users = db.get_active_users(alert_time='09:00')

    # 2. í‚¤ì›Œë“œë³„ë¡œ ê·¸ë£¹í™” (ì¤‘ë³µ ìš”ì²­ ë°©ì§€)
    keywords = set(user.keyword for user in users)

    # 3. í‚¤ì›Œë“œë³„ ë‰´ìŠ¤ ìˆ˜ì§‘ + ìš”ì•½ (ë³‘ë ¬ ì²˜ë¦¬)
    summaries = {}
    for keyword in keywords:
        # ìºì‹œ í™•ì¸
        cached = db.get_news_cache(keyword, today)
        if cached:
            summaries[keyword] = cached
            continue

        # ë‰´ìŠ¤ ìˆ˜ì§‘
        news = get_google_news(keyword, max_results=10)

        # Claude ìš”ì•½ (ë‹¹ì‹ ì˜ API í‚¤)
        summary = summarize_with_claude(news, keyword)

        # ìºì‹œ ì €ì¥
        db.save_news_cache(keyword, summary, today)
        summaries[keyword] = summary

    # 4. ê° ì‚¬ìš©ìì—ê²Œ ì „ì†¡ (ë³‘ë ¬ ì²˜ë¦¬)
    for user in users:
        summary = summaries[user.keyword]

        # ì‚¬ìš©ìì˜ ë´‡ í† í°ìœ¼ë¡œ ì „ì†¡
        send_telegram_message(
            bot_token=user.bot_token,
            chat_id=user.chat_id,
            message=summary
        )
```

---

## ğŸ’° ë¹„ìš© ìµœì í™”

### Claude API í˜¸ì¶œ ìµœì†Œí™”

**ë¬¸ì œ**: 100ëª…ì´ "AI" í‚¤ì›Œë“œ â†’ 100ë²ˆ í˜¸ì¶œ?
**í•´ê²°**: ìºì‹œ ì‚¬ìš© â†’ 1ë²ˆë§Œ í˜¸ì¶œ!

```python
def get_summary(keyword):
    # 1. ì˜¤ëŠ˜ ìºì‹œ í™•ì¸
    cached = news_cache.get(keyword, date.today())
    if cached:
        return cached  # API í˜¸ì¶œ ì•ˆ í•¨!

    # 2. ìºì‹œ ì—†ìœ¼ë©´ ìƒˆë¡œ ìƒì„±
    news = get_google_news(keyword)
    summary = claude_api.summarize(news)  # API í˜¸ì¶œ

    # 3. ìºì‹œ ì €ì¥
    news_cache.save(keyword, summary, date.today())

    return summary
```

**ì˜ˆìƒ ë¹„ìš©**:
- ì‚¬ìš©ì 100ëª…
- ê³ ìœ  í‚¤ì›Œë“œ 20ê°œ
- Claude API í˜¸ì¶œ: í•˜ë£¨ 20ë²ˆ
- ì›” ë¹„ìš©: ì•½ $5-10

---

## ğŸš€ ë°°í¬ ì˜µì…˜

### ì˜µì…˜ 1: AWS EC2 (ê°„ë‹¨)

```bash
# t2.micro (í”„ë¦¬í‹°ì–´)
- 24/7 ì‹¤í–‰
- SQLite ì‚¬ìš©
- ì›” ë¹„ìš©: $0-10
```

**ì¥ì **: ê°„ë‹¨, ë¹ ë¥¸ ê°œë°œ
**ë‹¨ì **: ì„œë²„ ê´€ë¦¬ í•„ìš”

### ì˜µì…˜ 2: AWS Lambda + RDS (ì„œë²„ë¦¬ìŠ¤)

```yaml
# Lambda Function
- ìŠ¤ì¼€ì¤„ëŸ¬: EventBridge (cron)
- ë°ì´í„°ë² ì´ìŠ¤: RDS Aurora Serverless
- ì›” ë¹„ìš©: ì‚¬ìš©ëŸ‰ì— ë”°ë¼ $5-20
```

**ì¥ì **: ê´€ë¦¬ ë¶ˆí•„ìš”, í™•ì¥ì„±
**ë‹¨ì **: ì´ˆê¸° ì„¤ì • ë³µì¡

### ì˜µì…˜ 3: Heroku (ì‰¬ìš´ ë°°í¬)

```bash
# Heroku Free/Hobby
- ìë™ ë°°í¬
- PostgreSQL ì œê³µ
- ì›” ë¹„ìš©: $0-7
```

**ì¥ì **: ê°€ì¥ ì‰¬ì›€
**ë‹¨ì **: ë¬´ë£Œ í”Œëœ ì œí•œ

---

## ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 1. ë´‡ í† í° ì €ì¥

```python
# ì•”í˜¸í™” ì €ì¥
from cryptography.fernet import Fernet

class TokenEncryption:
    def __init__(self, key):
        self.cipher = Fernet(key)

    def encrypt_token(self, token):
        return self.cipher.encrypt(token.encode()).decode()

    def decrypt_token(self, encrypted):
        return self.cipher.decrypt(encrypted.encode()).decode()
```

### 2. API í‚¤ ê´€ë¦¬

```python
# í™˜ê²½ ë³€ìˆ˜ ë˜ëŠ” AWS Secrets Manager
ANTHROPIC_API_KEY = os.getenv('ANTHROPIC_API_KEY')

# AWS Secrets Manager
import boto3
secrets = boto3.client('secretsmanager')
api_key = secrets.get_secret_value(SecretId='ANTHROPIC_API_KEY')
```

### 3. Rate Limiting

```python
# ì‚¬ìš©ìë‹¹ ì¼ì¼ ìš”ì²­ ì œí•œ
from flask_limiter import Limiter

limiter = Limiter(
    app,
    key_func=lambda: request.remote_addr,
    default_limits=["100 per day"]
)
```

---

## ğŸ“ˆ í™•ì¥ì„±

### í˜„ì¬ êµ¬ì¡° (Phase 1)
- ì‚¬ìš©ì: ~100ëª…
- í‚¤ì›Œë“œ: ~20ê°œ
- Claude í˜¸ì¶œ: ~20ë²ˆ/ì¼
- ë¹„ìš©: $5/ì›”

### í™•ì¥ í›„ (Phase 3)
- ì‚¬ìš©ì: ~10,000ëª…
- í‚¤ì›Œë“œ: ~500ê°œ
- Claude í˜¸ì¶œ: ~500ë²ˆ/ì¼
- ë¹„ìš©: $50-100/ì›”

**ìŠ¤ì¼€ì¼ë§ ì „ëµ**:
1. ìºì‹œ ì ê·¹ í™œìš©
2. í‚¤ì›Œë“œ ê·¸ë£¹í™”
3. ë°°ì¹˜ ì²˜ë¦¬
4. Redis ìºì‹œ ë„ì…

---

## ğŸ› ï¸ ê°œë°œ ë¡œë“œë§µ

### Phase 2: ì›¹ UI + ìŠ¤ì¼€ì¤„ëŸ¬

- [ ] Flask/FastAPI ì›¹ ì„œë²„
- [ ] ì‚¬ìš©ì ë“±ë¡ í˜ì´ì§€
- [ ] SQLite ë°ì´í„°ë² ì´ìŠ¤
- [ ] APScheduler í†µí•©
- [ ] Chat ID ìë™ ìˆ˜ì§‘

### Phase 3: ê³ ê¸‰ ê¸°ëŠ¥

- [ ] ë‹¤ì¤‘ í‚¤ì›Œë“œ ì§€ì›
- [ ] ì‹œê°„ëŒ€ë³„ ì•Œë¦¼
- [ ] ì‚¬ìš©ì ëŒ€ì‹œë³´ë“œ
- [ ] í†µê³„ ë° ë¶„ì„

### Phase 4: ìƒìš©í™”

- [ ] ê²°ì œ ì‹œìŠ¤í…œ
- [ ] ê´€ë¦¬ì íŒ¨ë„
- [ ] AWS ë°°í¬
- [ ] ëª¨ë‹ˆí„°ë§

---

## ğŸ“š ì°¸ê³  ì½”ë“œ

### í•µì‹¬ í•¨ìˆ˜

```python
# telegram_news_bot_multi.py (ìƒˆ íŒŒì¼)

class NewsBot:
    def __init__(self, db_path, anthropic_key):
        self.db = Database(db_path)
        self.claude = anthropic.Anthropic(api_key=anthropic_key)

    def send_to_user(self, user):
        """ë‹¨ì¼ ì‚¬ìš©ìì—ê²Œ ë‰´ìŠ¤ ì „ì†¡"""
        # 1. ë‰´ìŠ¤ ìˆ˜ì§‘
        news = get_google_news(user.keyword)

        # 2. ìš”ì•½ (ìºì‹œ í™•ì¸)
        summary = self.get_or_create_summary(user.keyword, news)

        # 3. ì‚¬ìš©ìì˜ ë´‡ìœ¼ë¡œ ì „ì†¡
        send_telegram_message(
            bot_token=user.bot_token,
            chat_id=user.chat_id,
            message=summary
        )

    def get_or_create_summary(self, keyword, news):
        """ìºì‹œ ìš°ì„ , ì—†ìœ¼ë©´ ìƒì„±"""
        cached = self.db.get_cache(keyword, today)
        if cached:
            return cached

        summary = self.claude.summarize(news)
        self.db.save_cache(keyword, summary, today)
        return summary
```

---

**ì´ì œ Phase 2 ê°œë°œì„ ì‹œì‘í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤!**

Made with â¤ï¸ by hwayobi2020
